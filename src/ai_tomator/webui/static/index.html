<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <title>AI-Tomator</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/batch_status.css">
    <link rel="stylesheet" href="css/batch_overlay.css">
    <script type="module" src="js/app.js"></script>
</head>

<body>

<div id="authOverlay" class="overlay">
    <div class="overlay-content">
        <h2 id="authTitle">Willkommen bei AI-Tomator</h2>

        <form id="authForm">
            <input type="text" id="username" placeholder="Benutzername" required>

            <input type="password" id="password" placeholder="Passwort" required>

            <!-- Nur im Register-Modus sichtbar -->
            <input
                    type="password"
                    id="passwordConfirm"
                    placeholder="Passwort wiederholen"
                    style="display:none;"
            >

            <button type="submit" id="submitBtn">Login</button>
        </form>

        <p class="auth-switch">
            <span id="switchText">Noch keinen Account?</span>
            <a href="#" id="switchMode">Registrieren</a>
        </p>
    </div>
</div>



<div class="layout">
    <aside class="sidebar">
        <div class="logo">
            AI-Tomator
        </div>

        <nav>
            <a href="#batch-run">Batch Run</a>
            <a href="#batch-export">Export Batches</a>
            <a href="#price-calculator">Price Calculator</a>
            <a href="#files">Files</a>
            <a href="#prompts">Prompts</a>
            <a href="#endpoints">Endpoints</a>
            <a href="https://github.com/Benjino16/ai-tomator" target="_blank" rel="noopener noreferrer">Docs</a>
        </nav>

        <div class="sidebar-badges">
            <button id="logoutBtn" class="button button--red">Logout</button>
        </div>
    </aside>


    <main>
        <section id="batch-run">
            <h2>Batch Run</h2>
            <div class="card">
                <table id="runsTable">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Status</th>
                        <th>Date/Uptime</th>
                        <th>Model</th>
                        <th>Temp</th>
                        <th>Info</th>
                    </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <button class="button button--blue" id="open-start-overlay-btn">New Batch</button>
        </section>

        <section id="batch-export">
            <h2>Batch Export</h2>
            <div class="card">
                <div class="flex-wrap">
                    <select id="export-mode-select">
                        <option value="raw_csv">CSV/RAW</option>
                        <option value="raw_excel">EXCEL/RAW</option>
                        <option value="long_format_csv">CSV/LONG-FORMAT</option>
                        <option value="long_format_excel">EXCEL/LONG-FORMAT</option>
                    </select>
                    <button class="button button--blue" id="export-button">Export</button>
                </div>
                <table id="batchTableExport">
                    <thead>
                    <tr>
                        <th><input type="checkbox" id="select-all-checkbox"></th>
                        <th>ID</th>
                        <th>Status</th>
                        <th>Endpoint</th>
                        <th>File Reader</th>
                    </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <section id="price-calculator">
            <h2>Price Calculator</h2>
            <div class="card">
                <form id="priceForm" class="form-grid">
                    <label for="price-provider-select">Provider</label>
                    <select id="price-provider-select" required>
                        <option value="OPENAI">OPENAI</option>
                        <option value="GOOGLE">GOOGLE</option>
                        <option value="DEEPSEEK">DEEPSEEK</option>
                    </select>

                    <label for="price-model-input">Model</label>
                    <input id="price-model-input" required type="text" placeholder="Example: gpt-4o">

                    <label for="price-file-tag-select">File-Tag</label>
                    <select id="price-file-tag-select" required></select>

                    <label for="price-file-reader-select">File Reader</label>
                    <select id="price-file-reader-select" required></select>

                    <label for="price-prompt-select">Prompt</label>
                    <select id="price-prompt-select" required></select>

                    <label for="price-example-output">Output</label>
                    <input id="price-example-output" required type="text" placeholder="Optional: example model output">

                    <button class="button button--blue" type="submit">Calculate</button>
                </form>
                <h2 id="price-result-header">Calculated Price: -</h2>
            </div>
        </section>

        <section id="files">
            <h2>Files</h2>
            <div class="card">
                <table id="filesTable">
                    <thead>
                    <tr>
                        <th>Name</th>
                        <th>ID</th>
                        <th>Size</th>
                        <th>Mime</th>
                        <th>Tags</th>
                        <th>Action</th>
                    </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
            <button class="button button--blue" id="openUploadOverlay">+ Dateien hinzufügen</button>
        </section>

        <section id="prompts">
            <h2>Prompts</h2>
            <div class="card">
                <form id="promptsForm">
                    <input id="promptName" placeholder="Name" required type="text" minlength="3">
                    <input id="promptInput" placeholder="Prompt" type="text" minlength="3">
                    <button type="submit">Add</button>
                    <input type="file" id="promptTXTFileInput" accept="text/plain">
                </form>


                <table id="promptsTable">
                    <thead>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Prompt</th>
                        <th>Action</th>
                    </tr>
                    </thead>
                    <tbody></tbody>
                </table>

            </div>
        </section>

        <section id="endpoints">
            <h2>Endpoints</h2>
            <div class="card">
                <form id="endpointForm">
                    <input id="endpointName" placeholder="Name" required type="text" minlength="3">
                    <select id="endpointEngine" required></select>
                    <input id="endpointUrl" placeholder="URL (optional)" type="url" minlength="5">
                    <input id="endpointToken" placeholder="Token (optional)" type="text" minlength="3">
                    <button type="submit">Add</button>
                </form>

                <table id="endpointsTable">
                    <thead>
                    <tr>
                        <th>Name</th>
                        <th>Engine</th>
                        <th>URL</th>
                        <th>Token</th>
                        <th>Action</th>
                    </tr>
                    </thead>
                    <tbody></tbody>
                </table>

            </div>
        </section>

        <footer>
            AI-Tomator • Ben Kathöfer • v0.4.0
        </footer>

    </main>
</div>
<div id="batchStartOverlay" class="overlay hidden">
    <div class="overlay-content">
        <h3>Start new batch:</h3>
        <form id="runForm" class="form-grid">
            <label for="endpoint-select">Endpoint</label>
            <select id="endpoint-select" required></select>

            <label for="file-tag-select">File-Tag</label>
            <select id="file-tag-select" required></select>

            <label for="file-reader-select">File Reader</label>
            <select id="file-reader-select" required></select>

            <label for="model-select">Model</label>
            <select id="model-select" required></select>

            <label for="prompt-select">Prompt</label>
            <select id="prompt-select" required></select>

            <label for="temperature-input">Temperature</label>
            <input id="temperature-input" placeholder="Temperature" required type="number" value="1.0" min="0.0" max="3.0" step="0.1">

            <label for="delay-input">Delay (seconds)</label>
            <input id="delay-input" placeholder="Delay (seconds)" required type="number" min="0" max="360" value="10">

            <button class="button button--blue" type="submit">Run</button>
        </form>

    </div>
</div>
<div id="uploadOverlay" class="overlay hidden">
    <div class="overlay-content">
        <h3>Dateien hochladen</h3>

        <div class="dropzone" id="overlayDropzone">
            Dateien hierher ziehen oder klicken
        </div>
        <input type="file" id="overlayFileInput" multiple style="display:none">

        <h4>Ausgewählte Dateien</h4>
        <ul id="selectedFilesList"></ul>

        <label>Tag:</label>
        <input type="text" id="uploadTag">

        <div class="action-row">
            <button id="cancelUploadOverlay">Abbrechen</button>
            <button id="uploadFilesBtn">Hochladen</button>
        </div>
    </div>
</div>
<div id="batchDetailOverlay" class="overlay hidden">
    <div class="overlay-content">
        <div class="card">
            <h4>Batch Details</h4>
            <table id="batchDetailsTable">
            </table>
        </div>
    </div>
</div>
<div id="batchLogsOverlay" class="overlay hidden">
    <div class="overlay-content">
        <div class="card">
            <h4>Batch Logs</h4>
            <pre id="batch-logs"></pre>
        </div>
    </div>
</div>
<div id="batchFilesOverlay" class="overlay hidden">
    <div class="overlay-content">
        <div class="card">
            <h4>Batch File Status</h4>
            <pre id="batchFilesStatusPre"></pre>
            <table id="batchFileTable">
            </table>
        </div>
    </div>
</div>
<div id="warning-overlay" class="overlay hidden">
    <div class="overlay-content">
        <h4>⚠️ WARNING</h4>
        <p>This is a beta version. Breaking changes may occur with any update. Please make sure to export your batches before updating, as database changes may also occur.</p>
        <p>If you are running this on a server, note that no authentication is required. Anyone with access to the link can view and modify the data.</p>
        <p>This may also be a shared instance. Only make changes related to your own data.</p>
        <button id="understand-warning-btn">I understand</button>
    </div>
</div>
</body>
</html>
